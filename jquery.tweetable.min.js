/*
 * tweetable 1.8 - jQuery twitter feed generator plugin
 *
 * Copyright (c) 2009 Philip Beel (http://www.theodin.co.uk/)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) 
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * With modifications from:
 * Philipp Robbel (http://www.robbel.com/) - IE compatibility
 * Patrick DW (stackoverflow) - IE compatibility
 * Mike Walker (github.com/incredimike) - performance, fuzzy date support, UI modifications
 * Raad Al-Rawi (github.com/raad) - retweet support
 * 
 * Fuzzy date support (i.e. "3 days ago") requires jquery.timeago.js plugin available from:
 *   http://github.com/rmm5t/jquery-timeago
 * 
 * Revision: $Id: jquery.tweetable.js 2011-04-26 $ 
 */

(function($){$.fn.tweetable=function(options){var defaults={limit:5,username:"philipbeel",retweets:false,time:false,replies:false,position:"append"};var options=$.extend(defaults,options);return this.each(function(options){var act=$(this);var $tweetList;var api="http://api.twitter.com/1/statuses/user_timeline.json?screen_name=";var count="&count=";var rts="&include_rts=";$.getJSON(api+defaults.username+count+defaults.limit+rts+defaults.retweets+"&callback=?",act,function(data){$.each(data,function(i,item){if(i==0){$tweetList=$('<ul class="tweetList">')[defaults.position.toLowerCase()+"To"](act);}if((defaults.replies===true)||(item.in_reply_to_status_id===null)){$tweetList.append('<li class="tweet_content_'+i+'"><p class="tweet_link_'+i+'">'+item.text.replace(/#(.*?)(\s|$)/g,'<span class="hash">#$1 </span>').replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$&">$&</a> ').replace(/@(.*?)(\s|:|\(|\)|$)/g,'<a href="http://twitter.com/$1">@$1</a>$2')+"</p></li>");}if(defaults.time===true){var date=new Date(item.created_at);if(jQuery.timeago){var date_text=jQuery.timeago(date);}else{var date_text=[date.getDate(),"/",date.getMonth(),"/",date.getFullYear()," ",date.toLocaleTimeString()].join("");}$(".tweet_link_"+i).append(['<small><a href="http://twitter.com/',item.user.screen_name,"/status/",item.id_str,'">',date_text,"</a></small>"].join(""));}});if(typeof defaults.callback==="function"){defaults.callback.call(this,data);}});});};})(jQuery);